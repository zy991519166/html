<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RayDataWeb å¼€å‘å±•ç¤º - ä½ çš„åå­—</title>
    <style>
        :root {
            /* æ·»åŠ CSSå˜é‡ç”¨äºä¸»é¢˜åˆ‡æ¢ */
            --bg-gradient-start: #ffffff;
            --bg-gradient-end: #f8fafc;
            --text-primary: #334155;      /* æ›´æŸ”å’Œçš„æ·±ç°è‰² */
            --text-secondary: #64748b;    /* ä¸­ç°è‰²æ–‡å­— */
            --title-primary: #0f172a;     /* æ›´æ·±çš„æ ‡é¢˜è‰² */
            --title-secondary: #1e293b;   /* æ·±ç°è‰²å‰¯æ ‡é¢˜ */
            --title-tertiary: #334155;    /* ä¸­æ·±ç°è‰²å°æ ‡é¢˜ */
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-bg-hover: rgba(255, 255, 255, 1);
            --card-shadow: rgba(0, 0, 0, 0.06);
            --card-shadow-hover: rgba(0, 0, 0, 0.1);
            --particle-opacity: 0.8;
        }

        [data-theme="dark"] {
            --bg-gradient-start: #000000;
            --bg-gradient-end: #111111;
            --text-primary: #e2e8f0;      /* æŸ”å’Œçš„æµ…ç°è‰² */
            --text-secondary: #cbd5e1;    /* æ›´æµ…çš„ç°è‰²æ–‡å­— */
            --title-primary: #f8fafc;     /* è¿‘ç™½è‰²æ ‡é¢˜ */
            --title-secondary: #f1f5f9;   /* æµ…ç°ç™½å‰¯æ ‡é¢˜ */
            --title-tertiary: #e2e8f0;    /* ç°ç™½è‰²å°æ ‡é¢˜ */
            --card-bg: rgba(17, 17, 17, 0.95);
            --card-bg-hover: rgba(24, 24, 27, 0.98);
            --card-shadow: rgba(0, 0, 0, 0.3);
            --card-shadow-hover: rgba(0, 0, 0, 0.4);
            --particle-opacity: 0.6;
        }

        /* ä¸»é¢˜åˆ‡æ¢æŒ‰é’®æ ·å¼ */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--card-bg);
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            cursor: pointer;
            box-shadow: 0 2px 8px var(--card-shadow);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.9;                 /* ç¨å¾®é€æ˜ */
        }

        .theme-toggle:hover {
            opacity: 1;
            transform: scale(1.1);
            background: var(--card-bg-hover);
            box-shadow: 0 4px 12px var(--card-shadow-hover);
        }

        .theme-toggle svg {
            width: 22px;                  /* ç¨å¾®è°ƒå°å›¾æ ‡ */
            height: 22px;
            fill: var(--text-primary);
        }

        /* æ›´æ–°ç°æœ‰æ ·å¼ä»¥ä½¿ç”¨CSSå˜é‡ */
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
            color: var(--text-primary);
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(45deg, var(--bg-gradient-start), var(--bg-gradient-end));
            pointer-events: auto; /* é»˜è®¤å…è®¸äº‹ä»¶ */
        }

        .content {
            position: relative;
            padding: 10px;
            max-width: 1200px;
            margin: 0 auto;
            z-index: 1; /* ç¡®ä¿å†…å®¹åœ¨ç”»å¸ƒä¹‹ä¸Š */
            pointer-events: auto; /* ç¡®ä¿å†…å®¹å¯ä»¥æ¥æ”¶äº‹ä»¶ */
            width: 100%;
            box-sizing: border-box;
        }

        .card {
            width: calc(100% - 20px);
            margin: 10px auto;
            padding: 15px;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.25);  /* ç»Ÿä¸€æµ…è‰²æ¨¡å¼çš„é€æ˜åº¦ */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-radius: 15px;
            box-shadow: 0 4px 20px var(--card-shadow);
            transition: all 0.3s ease;
        }

        .card:hover {
            background: rgba(255, 255, 255, 0.35);  /* ç»Ÿä¸€æ‚¬åœæ—¶çš„é€æ˜åº¦ */
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            transform: translateY(-2px);
            box-shadow: 0 6px 24px var(--card-shadow-hover);
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„å¡ç‰‡æ ·å¼ */
        [data-theme="dark"] .card {
            background: rgba(17, 17, 17, 0.25);  /* ä¸æµ…è‰²æ¨¡å¼ä¿æŒä¸€è‡´çš„é€æ˜åº¦ */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        [data-theme="dark"] .card:hover {
            background: rgba(17, 17, 17, 0.35);  /* ä¸æµ…è‰²æ¨¡å¼ä¿æŒä¸€è‡´çš„é€æ˜åº¦ */
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
        }

        /* ä¼˜åŒ–è§†é¢‘æ ·å¼ */
        video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 16px var(--card-shadow);
            background: transparent;
            transition: all 0.3s ease;
        }

        video:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 24px var(--card-shadow-hover);
            filter: brightness(1.15) contrast(1.15); /* æ‚¬åœæ—¶ç•¥å¾®å¢åŠ äº®åº¦ */
        }

        /* ä¼˜åŒ–è§†é¢‘æ§ä»¶æ ·å¼ */
        video::-webkit-media-controls {
            background-color: transparent !important; /* å¼ºåˆ¶ç§»é™¤æ§ä»¶èƒŒæ™¯ */
            border-radius: 0 0 8px 8px;
        }

        video::-webkit-media-controls-panel {
            background-color: transparent !important; /* å¼ºåˆ¶ç§»é™¤é¢æ¿èƒŒæ™¯ */
        }

        video::-webkit-media-controls-play-button {
            filter: brightness(1.2); /* å¢åŠ æ’­æ”¾æŒ‰é’®äº®åº¦ */
        }

        /* ç¡®ä¿è§†é¢‘åœ¨æ·±è‰²æ¨¡å¼ä¸‹ä¹Ÿæ¸…æ™°å¯è§ */
        [data-theme="dark"] video {
            filter: brightness(1.2) contrast(1.15); /* æ·±è‰²æ¨¡å¼ä¸‹æ›´é«˜çš„äº®åº¦ */
        }

        [data-theme="dark"] video:hover {
            filter: brightness(1.25) contrast(1.2);
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--title-primary);
            text-shadow: none;            /* ç§»é™¤æ–‡å­—é˜´å½±ä½¿å…¶æ›´æ¸…çˆ½ */
            font-weight: 600;             /* ç¨å¾®åŠ ç²— */
            letter-spacing: -0.5px;       /* ç¨å¾®æ”¶ç´§å­—é—´è· */
        }

        h2 {
            color: var(--title-secondary);
            margin: 1.5rem 0;
            font-weight: 500;             /* é€‚ä¸­çš„å­—é‡ */
            letter-spacing: -0.3px;
        }

        h3 {
            color: var(--title-tertiary);
            margin: 1rem 0;
            font-weight: 500;
            font-size: 1.25rem;           /* è°ƒæ•´å°æ ‡é¢˜å¤§å° */
        }

        p {
            color: var(--text-secondary);
            line-height: 1.7;             /* å¢åŠ è¡Œé«˜æé«˜å¯è¯»æ€§ */
            font-size: 1rem;              /* ç¡®ä¿æ­£æ–‡å­—ä½“å¤§å°åˆé€‚ */
            margin: 0.75rem 0;            /* è°ƒæ•´æ®µè½é—´è· */
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            width: 100%;
            box-sizing: border-box;
        }

        .grid > div {
            width: 100%;
            box-sizing: border-box;
        }

        img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 16px var(--card-shadow);
            transition: transform 0.3s;
        }

        img:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 24px var(--card-shadow-hover);
        }

        /* ä¿®æ”¹é®ç½©å±‚å’Œå›¾ç‰‡çš„æ ·å¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            cursor: pointer;
            backdrop-filter: blur(5px);
            pointer-events: auto;
        }

        .modal-image {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90vh;
            border-radius: 8px;
            box-shadow: 0 4px 32px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
            z-index: 1001;
        }

        /* æ·»åŠ é“¾æ¥æ ·å¼ */
        .project-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            display: inline-block;
        }

        .project-link:hover {
            color: var(--title-primary);
            transform: translateX(5px);
        }

        .project-link::after {
            content: ' â†’';
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .project-link:hover::after {
            opacity: 1;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .content {
                padding: 5px;
            }

            .card {
                width: calc(100% - 10px);
                margin: 5px auto;
                padding: 10px;
            }

            .grid {
                gap: 10px;
            }

            h1 { font-size: 1.5rem; }
            h2 { font-size: 1.2rem; }
            h3 { font-size: 1rem; }
            p { font-size: 0.9rem; }
        }

        /* è¶…å°å±å¹•é€‚é… */
        @media (max-width: 480px) {
            .content {
                padding: 3px;
            }

            .card {
                width: calc(100% - 6px);
                margin: 3px auto;
                padding: 8px;
            }

            .grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- æ·»åŠ ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <button class="theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
        <!-- æœˆäº®å›¾æ ‡ (æ·±è‰²æ¨¡å¼) -->
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/>
        </svg>
        <!-- å¤ªé˜³å›¾æ ‡ (æµ…è‰²æ¨¡å¼) -->
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display: none;">
            <path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 S11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0 s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/>
        </svg>
    </button>

    <div id="canvas-container"></div>
    
    <div class="content">
        <div class="card">
            <h1> </h1>
            <p>ä¸“æ³¨äºï¼Œæ“…é•¿</p>
        </div>

        <div class="card">
            <h2>ğŸ¨ ä½œå“å±•ç¤º</h2>
            <div class="grid">
                <!-- ç¬¬ä¸€ä¸ªå›¾ç‰‡ -->
                <div>
                    <h3>Unityèƒ½åŠ›å±•ç¤º</h3>
                    <a href="pages/unity-effects.html">
                        <!-- åœ¨ head ä¸­æ·»åŠ  -->
                        <link rel="preload" as="image" href="Resource/1.jpg">
                        <link rel="preload" as="image" href="Resource/2.jpg">
                        <link rel="preload" as="image" href="Resource/3.png">
                        <link rel="preload" as="image" href="Resource/4.png">
                        
                        <!-- å›¾ç‰‡æ·»åŠ  loading="lazy" -->
                        <img src="Resource/1.jpg" alt="Unityé¡¹ç›®å±•ç¤º" loading="lazy">
                    </a>
                    <a href="pages/unity-effects.html" class="project-link">åŸºäºUnity WebGLçš„é¡¹ç›®æˆªå›¾å±•ç¤º</a>
                </div>
                <!-- ç¬¬äºŒä¸ªå›¾ç‰‡ -->
                <div>
                    <h3>é¡¹ç›®æˆªå›¾</h3>
                    <a href="pages/screencap-gallery.html">
                        <img src="Resource/2.jpg" alt="RayDataæˆªå›¾å±•ç¤º">
                    </a>
                    <a href="pages/screencap-gallery.html" class="project-link">åŸºäºUnity WebGLçš„æˆªå›¾å±•ç¤º</a>
                </div>
                <!-- ç¬¬ä¸‰ä¸ªå›¾ç‰‡ -->
                <div>
                    <h3>Unity Shaderèƒ½åŠ›å±•ç¤º</h3>
                    <a href="pages/shader-gallery.html">
                        <img src="Resource/3.png" alt="Unity Shaderå±•ç¤º">
                    </a>
                    <a href="pages/shader-gallery.html" class="project-link">åŸºäºé»˜è®¤æ¸²æŸ“ç®¡çº¿åŠURPçš„Shaderå±•ç¤º</a>
                </div>
                <!-- ç¬¬å››ä¸ªå›¾ç‰‡ -->
                <div>
                    <h3>3DMaxèƒ½åŠ›å±•ç¤º</h3>
                    <a href="pages/3dmax-gallery.html">
                        <img src="Resource/4.png" alt="3DMaxèƒ½åŠ›å±•ç¤º">
                    </a>
                    <a href="pages/3dmax-gallery.html" class="project-link">åŸºäº3DMaxçš„èƒ½åŠ›å±•ç¤º</a>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ¬ è§†é¢‘æ¼”ç¤º</h2>
            <div class="grid">
                <!-- ç¬¬ä¸€ä¸ªè§†é¢‘ -->
                <div>
                    <h3>RayDataWebé¡¹ç›®å½•å±</h3>
                    <video controls>
                        <source src="Resource/v1.mp4" type="video/mp4">
                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
                    </video>
                    <a href="pages/RayDataWeb.html" class="project-link">RayDataWebé¡¹ç›®å½•å±</a>
                </div>
                <!-- ç¬¬äºŒä¸ªè§†é¢‘ -->
                <div>
                    <h3>WebGLé¡¹ç›®:å›½å®¶å®è—</h3>
                    <video controls>
                        <source src="Resource/v2.mp4" type="video/mp4">
                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
                    </video>
                    <a href="pages/webgl-project.html" class="project-link">WebGLé¡¹ç›®:å›½å®¶å®è—å°ç¨‹åº</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        class ParticleBackground {
            constructor() {
                this.container = document.querySelector('#canvas-container');
                this.mouse = new THREE.Vector2(0, 0);
                this.mousePosition = new THREE.Vector3();
                this.currentShape = 'square';
                this.currentSize = 1.0;
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.particles = null;
                this.initThree();
                this.createParticles();
                this.addEventListeners();
                this.animate();
            }

            clearParticles() {
                if (this.particles) {
                    // ç§»é™¤ç°æœ‰çš„ç²’å­
                    this.scene.remove(this.particles);
                    // é‡Šæ”¾å†…å­˜
                    this.particles.geometry.dispose();
                    this.particles.material.dispose();
                    if (this.particles.material.map) {
                        this.particles.material.map.dispose();
                    }
                    this.particles = null;
                }
            }

            recreateParticles() {
                // æ¸…é™¤ç°æœ‰ç²’å­
                this.clearParticles();
                // åˆ›å»ºæ–°ç²’å­
                this.createParticles();
            }

            initThree() {
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({ alpha: true });
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.container.appendChild(this.renderer.domElement);
                this.camera.position.z = 50;
            }

            createParticles() {
                const geometry = new THREE.BufferGeometry();
                const vertices = [];
                const colors = [];
                const particleCount = 5000;
                
                this.originalPositions = new Float32Array(particleCount * 3);

                // è·å–å½“å‰ä¸»é¢˜
                const isDarkMode = document.documentElement.getAttribute('data-theme') === 'dark';
                
                for (let i = 0; i < particleCount; i++) {
                    const x = (Math.random() - 0.5) * 100;
                    const y = (Math.random() - 0.5) * 100;
                    const z = (Math.random() - 0.5) * 50;

                    vertices.push(x, y, z);
                    this.originalPositions[i * 3] = x;
                    this.originalPositions[i * 3 + 1] = y;
                    this.originalPositions[i * 3 + 2] = z;

                    if (isDarkMode) {
                        // æ·±è‰²æ¨¡å¼çš„ç²’å­é¢œè‰²
                        colors.push(
                            0.4 + Math.random() * 0.2,  // R
                            0.5 + Math.random() * 0.3,  // G
                            0.7 + Math.random() * 0.3   // B
                        );
                    } else {
                        // æµ…è‰²æ¨¡å¼çš„ç²’å­é¢œè‰² - è°ƒæ•´ä¸ºæ›´æ·±çš„è“è‰²
                        colors.push(
                            0.2 + Math.random() * 0.2,  // R - é™ä½çº¢è‰²åˆ†é‡
                            0.3 + Math.random() * 0.3,  // G - å¢åŠ ç»¿è‰²åˆ†é‡
                            0.6 + Math.random() * 0.4   // B - æ˜¾è‘—å¢åŠ è“è‰²åˆ†é‡
                        );
                    }
                }

                geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
                geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));

                const particleOpacity = isDarkMode ? 0.6 : 0.85; // å¢åŠ æµ…è‰²æ¨¡å¼ä¸‹çš„ä¸é€æ˜åº¦

                this.material = new THREE.PointsMaterial({
                    size: this.currentSize,
                    vertexColors: true,
                    transparent: true,
                    opacity: particleOpacity,
                    map: this.createSquareTexture(),
                    depthWrite: false,
                    depthTest: false,
                    blending: THREE.AdditiveBlending,
                    alphaTest: 0.01
                });

                this.particles = new THREE.Points(geometry, this.material);
                this.scene.add(this.particles);
            }

            createSquareTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                const ctx = canvas.getContext('2d');
                
                const gradient = ctx.createRadialGradient(
                    64, 64, 0,
                    64, 64, 32
                );
                
                // å¢åŠ æ¸å˜å¯¹æ¯”åº¦
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 128, 128);
                
                const texture = new THREE.Texture(canvas);
                texture.needsUpdate = true;
                return texture;
            }

            createCircleTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                const ctx = canvas.getContext('2d');
                
                const gradient = ctx.createRadialGradient(
                    64, 64, 0,
                    64, 64, 32
                );
                
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                
                ctx.beginPath();
                ctx.arc(64, 64, 32, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
                
                const texture = new THREE.Texture(canvas);
                texture.needsUpdate = true;
                return texture;
            }

            createTriangleTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                const ctx = canvas.getContext('2d');
                
                const gradient = ctx.createRadialGradient(
                    64, 64, 0,
                    64, 64, 32
                );
                
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                
                ctx.beginPath();
                ctx.moveTo(64, 32);
                ctx.lineTo(96, 96);
                ctx.lineTo(32, 96);
                ctx.closePath();
                ctx.fillStyle = gradient;
                ctx.fill();
                
                const texture = new THREE.Texture(canvas);
                texture.needsUpdate = true;
                return texture;
            }

            addEventListeners() {
                window.addEventListener('mousemove', (e) => {
                    this.updateMousePosition(e.clientX, e.clientY);
                });

                window.addEventListener('touchmove', (e) => {
                    if (e.touches.length > 0) {
                        const touch = e.touches[0];
                        this.updateMousePosition(touch.clientX, touch.clientY);
                    }
                });

                window.addEventListener('resize', () => {
                    this.camera.aspect = window.innerWidth / window.innerHeight;
                    this.camera.updateProjectionMatrix();
                    this.renderer.setSize(window.innerWidth, window.innerHeight);
                });
            }

            updateMousePosition(x, y) {
                this.mouse.x = (x / window.innerWidth) * 2 - 1;
                this.mouse.y = -(y / window.innerHeight) * 2 + 1;

                this.mousePosition.set(
                    this.mouse.x * 50,
                    this.mouse.y * 50,
                    0
                );

                // æ ¹æ®æ°´å¹³ä½ç½®æ›´æ–°å½¢çŠ¶
                const horizontalPosition = x / window.innerWidth;
                this.updateShapeByPosition(horizontalPosition);

                // æ ¹æ®å‚ç›´ä½ç½®æ›´æ–°å¤§å°
                const verticalPosition = y / window.innerHeight;
                this.updateSizeByPosition(verticalPosition);
            }

            updateShapeByPosition(horizontalPosition) {
                let newShape;
                if (horizontalPosition < 1/3) {
                    newShape = 'triangle';
                } else if (horizontalPosition < 2/3) {
                    newShape = 'square';
                } else {
                    newShape = 'circle';
                }

                if (this.currentShape !== newShape) {
                    this.currentShape = newShape;
                    switch(newShape) {
                        case 'triangle':
                            this.material.map = this.createTriangleTexture();
                            break;
                        case 'square':
                            this.material.map = this.createSquareTexture();
                            break;
                        case 'circle':
                            this.material.map = this.createCircleTexture();
                            break;
                    }
                    this.material.needsUpdate = true;
                }
            }

            updateSizeByPosition(verticalPosition) {
                // å¤§å°èŒƒå›´ä» 0.5 åˆ° 2.0
                const newSize = 0.5 + (verticalPosition * 1.5);
                if (this.currentSize !== newSize) {
                    this.currentSize = newSize;
                    this.material.size = newSize;
                    this.material.needsUpdate = true;
                }
            }

            animate() {
                requestAnimationFrame(() => this.animate());

                const positions = this.particles.geometry.attributes.position.array;
                const time = Date.now() * 0.0005;

                for (let i = 0; i < positions.length; i += 3) {
                    const originalX = this.originalPositions[i];
                    const originalY = this.originalPositions[i + 1];
                    const originalZ = this.originalPositions[i + 2];

                    const dx = positions[i] - this.mousePosition.x;
                    const dy = positions[i + 1] - this.mousePosition.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    const repelFactor = Math.min(40 / (distance + 0.1), 0.8);

                    positions[i] = originalX + 
                        Math.sin(time + i * 0.1) * 0.4 +
                        dx * repelFactor;

                    positions[i + 1] = originalY + 
                        Math.cos(time + i * 0.1) * 0.4 +
                        dy * repelFactor;

                    positions[i + 2] = originalZ + 
                        Math.sin(time + i * 0.1) * 0.4;
                }

                this.particles.geometry.attributes.position.needsUpdate = true;
                this.renderer.render(this.scene, this.camera);
            }
        }

        // æ·»åŠ ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
        class ThemeManager {
            constructor() {
                this.themeToggle = document.querySelector('.theme-toggle');
                this.moonIcon = document.querySelector('.moon');
                this.sunIcon = document.querySelector('.sun');
                this.isDark = false;
                this.particleBackground = null;
                
                // æ£€æŸ¥URLå‚æ•°ä¸­çš„ä¸»é¢˜è®¾ç½®
                const urlParams = new URLSearchParams(window.location.search);
                const themeParam = urlParams.get('theme');
                const savedTheme = localStorage.getItem('theme');
                
                // ä¼˜å…ˆä½¿ç”¨URLå‚æ•°çš„ä¸»é¢˜è®¾ç½®ï¼Œå…¶æ¬¡ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„è®¾ç½®
                if (themeParam === 'dark' || (!themeParam && savedTheme === 'dark')) {
                    this.enableDarkMode();
                }

                this.addEventListeners();
            }

            setParticleBackground(pb) {
                this.particleBackground = pb;
            }

            enableDarkMode() {
                document.documentElement.setAttribute('data-theme', 'dark');
                this.moonIcon.style.display = 'none';
                this.sunIcon.style.display = 'block';
                this.isDark = true;
                localStorage.setItem('theme', 'dark');
                
                // é‡æ–°åˆ›å»ºç²’å­
                if (this.particleBackground) {
                    this.particleBackground.recreateParticles();
                }
                // æ›´æ–°æ‰€æœ‰é“¾æ¥çš„URL
                this.updateLinksTheme('dark');
            }

            enableLightMode() {
                document.documentElement.setAttribute('data-theme', 'light');
                this.moonIcon.style.display = 'block';
                this.sunIcon.style.display = 'none';
                this.isDark = false;
                localStorage.setItem('theme', 'light');
                
                // é‡æ–°åˆ›å»ºç²’å­
                if (this.particleBackground) {
                    this.particleBackground.recreateParticles();
                }
                // æ›´æ–°æ‰€æœ‰é“¾æ¥çš„URL
                this.updateLinksTheme('light');
            }

            addEventListeners() {
                this.themeToggle.addEventListener('click', () => {
                    if (this.isDark) {
                        this.enableLightMode();
                    } else {
                        this.enableDarkMode();
                    }
                });
            }

            // æ·»åŠ æ–°æ–¹æ³•ï¼šæ›´æ–°æ‰€æœ‰é“¾æ¥çš„ä¸»é¢˜å‚æ•°
            updateLinksTheme(theme) {
                const links = document.querySelectorAll('a');
                links.forEach(link => {
                    if (link.href && link.href.startsWith(window.location.origin)) {
                        const url = new URL(link.href);
                        url.searchParams.set('theme', theme);
                        link.href = url.toString();
                    }
                });
            }
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            const themeManager = new ThemeManager();
            const particleBackground = new ParticleBackground();
            themeManager.setParticleBackground(particleBackground);
        });

        // è§†é¢‘äº’æ–¥æ’­æ”¾æ§åˆ¶
        document.addEventListener('DOMContentLoaded', () => {
            const videos = document.querySelectorAll('video');
            
            videos.forEach(video => {
                video.addEventListener('play', () => {
                    videos.forEach(otherVideo => {
                        if (otherVideo !== video && !otherVideo.paused) {
                            otherVideo.pause();
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>